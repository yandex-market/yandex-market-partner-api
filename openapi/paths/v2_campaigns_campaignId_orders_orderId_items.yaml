put:
  tags:
    - orders
    - fbs
    - dbs
    - express
  x-auth-scopes:
    - all-methods
    - inventory-and-order-processing
  x-resource-limit-config:
    path: resp
    amount: 100000
    period: hours
    parallel-limit-value: 6
  operationId: updateOrderItems
  summary: Удаление товаров из заказа или уменьшение их числа
  description: "{% include notitle [:no-translate[access]](../../_auto/method_scopes/updateOrderItems.md) %}\n\n{% note warning \"Если вы работаете по модели FBS\" %}\n\nИспользуйте метод [PUT\_v2/campaigns/{campaignId}/orders/{orderId}/boxes](../../reference/orders/setOrderBoxLayout.md).\n\n{% endnote %}\n\nУдаляет один или несколько товаров из заказа, если магазин не может поставить их все.\n\nЗаказ должен находится в статусе `\"status\": \"PROCESSING\"` этапа обработки `\"substatus\": \"STARTED\"`. Изменить состав нельзя после передачи статуса `\"substatus\": \"READY_TO_SHIP\"`.\n\n{% cut \"Уменьшить количество одинаковых товаров\" %}\n\nПередайте обновленное значение в параметре `count`.\n\n{% endcut %}\n\n{% cut \"Удалить товар из заказа\" %}\n\nПередайте значение `0` в параметре `count` или не передавайте `item`.\n\n{% endcut %}\n\nНельзя удалить или уменьшить количество товара, если он:\n\n* добавлен по акции;\n* составляет 99% стоимости заказа;\n* единственный товар в заказе.\n\nВ таком случае отмените заказ — в методе [PUT\_v2/campaigns/{campaignId}/orders/{orderId}/status](../../reference/orders/updateOrderStatus.md) передайте статус заказа `CANCELLED` с причиной отмены `SHOP_FAILED`.\n\n### Как вернутся деньги {#money}\n\n  Если покупатель оплатил товар при оформлении, Маркет вернет ему деньги за удаленные из заказа товары в течение двух дней:\n\n  * при оплате банковской картой — с момента, когда магазин переведет заказ в статус `SHIPPED`;\n\n  * при оплате через :no-translate[Apple Pay] или :no-translate[Google Pay] — с момента, когда магазин удалит товар из заказа.\n\n{% endcut %}\n\n{% include notitle [:no-translate[limit]](../../_auto/method_limits/updateOrderItems.md) %}\n"
  parameters:
    - $ref: ../components/parameters/CampaignId.yaml
    - $ref: ../components/parameters/OrderId.yaml
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: ../components/schemas/UpdateOrderItemRequest.yaml
  responses:
    '200':
      description: Маркет успешно обработал ваш запрос. Выходные данные не ожидаются.
    '400':
      $ref: ../components/responses/400.yaml
    '401':
      $ref: ../components/responses/401.yaml
    '403':
      $ref: ../components/responses/403.yaml
    '404':
      $ref: ../components/responses/404.yaml
    '420':
      $ref: ../components/responses/420.yaml
    '500':
      $ref: ../components/responses/500.yaml
